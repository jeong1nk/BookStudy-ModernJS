# 46.1. ì œë„ˆë ˆì´í„°ë€?
- ğŸ·ï¸ì œë„ˆë ˆì´í„°: ES6ì—ì„œ ë„ì…ë˜ì—ˆìœ¼ë©°, ì½”ë“œ ë¸”ë¡ì˜ ì‹¤í–‰ì„ ì´ì‹œ ì¤‘ì§€í–ˆë‹¤ê°€ í•„ìš”í•œ ì‹œì ì— ì¬ê°œí•  ìˆ˜ ìˆëŠ” íŠ¹ìˆ˜í•œ í•¨ìˆ˜
- ì œë„ˆë ˆì´í„°ì™€ ì¼ë°˜ í•¨ìˆ˜ì™€ì˜ ì°¨ì´ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.

**- 1. ì œë„ˆë ˆì´í„° í•¨ìˆ˜ëŠ” í•¨ìˆ˜ í˜¸ì¶œìì—ê²Œ í•¨ìˆ˜ ì‹¤í–‰ì˜ ì œì–´ê¶Œì„ ì–‘ë„í•  ìˆ˜ ìˆë‹¤.**
  - ì¼ë°˜ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ ì œì–´ê¶Œì´ í•¨ìˆ˜ì—ê²Œ ë„˜ì–´ê°€ê³  í•¨ìˆ˜ ì½”ë“œë¥¼ ì¼ê´„ ì‹¤í–‰í•œë‹¤. ì¦‰, í•¨ìˆ˜ í˜¸ì¶œìëŠ” í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œ ì´í›„ í•¨ìˆ˜ ì‹¤í–‰ì„ ì œì–´í•  ìˆ˜ ì—†ë‹¤.
  - ì œë„ˆë ˆì´í„° í•¨ìˆ˜ëŠ” í•¨ìˆ˜ ì‹¤í–‰ì„ í•¨ìˆ˜ í˜¸ì¶œìê°€ì œì–´í•  ìˆ˜ ìˆë‹¤. ë‹¤ì‹œ ë§í•´, í•¨ìˆ˜ í˜¸ì¶œìê°€ í•¨ìˆ˜ ì‹¤í–‰ì„ ì¼ì‹œ ì¤‘ì§€ì‹œí‚¤ê±°ë‚˜ ì¬ê°œì‹œí‚¬ ìˆ˜ìˆë‹¤
  - ì´ëŠ” í•¨ìˆ˜ì˜ ì œì–´ê¶Œì„ í•¨ìˆ˜ê°€ ë…ì í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ í•¨ìˆ˜í˜¸ ì¶œìì—ê²Œ ì–‘ë„í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤.   

**- 2. ì œë„ˆë ˆì´í„° í•¨ìˆ˜ëŠ” í•¨ìˆ˜ í˜¸ì¶œìì™€ í•¨ìˆ˜ì˜ ìƒíƒœë¥¼ ì£¼ê³ ë°›ì„ ìˆ˜ ìˆë‹¤.** 
  - ì¼ë°˜ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ ë§¤ê°œë³€ìˆ˜ë¥¼ í†µí•´ í•¨ìˆ˜ ì™¸ë¶€ì—ì„œ ê°’ì„ ì£¼ì…ë°›ê³  í•¨ìˆ˜ ì½”ë“œë¥¼ ì¼ê´„ ì‹¤í–‰í•˜ì—¬ ê²°ê³¼ê°’ì„ í•¨ìˆ˜ ì™¸ë¶€ë¡œ ë°˜í™˜í•œë‹¤. ì¦‰, í•¨ìˆ˜ê°€ ì‹¤í–‰ë˜ê³  ìˆëŠ” ë™ì•ˆì—ëŠ” í•¨ìˆ˜ì™¸ë¶€ì—ì„œ í•¨ìˆ˜ ë‚´ë¶€ë¡œ ê°’ì„ ì „ë‹¬í•˜ì—¬ í•¨ìˆ˜ì˜ ìƒíƒœë¥¼ ë³€ê²½í•  ìˆ˜ ì—†ë‹¤.
  - ì œë„ˆë ˆì´í„° í•¨ìˆ˜ëŠ” í•¨ìˆ˜ í˜¸ì¶œìì™€ ì–‘ë°©í–¥ìœ¼ë¡œ í•¨ìˆ˜ì˜ ìƒíƒœë¥¼ ì£¼ê³ ë°›ì„ ìˆ˜ ìˆë‹¤. ë‹¤ì‹œ ë§í•´, ì œë„ˆë ˆì´í„° í•¨ìˆ˜ëŠ” í•¨ìˆ˜í˜¸ì¶œìì—ê²Œ ìƒíƒœë¥¼ ì „ë‹¬í•  ìˆ˜ ìˆê³  í•¨ìˆ˜ í˜¸ì¶œìë¡œë¶€í„° ìƒíƒœë¥¼ ì „ë‹¬ë°›ì„ ìˆ˜ ìˆë‹¤.

**- 3. ì œë„ˆë ˆì´í„° í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ ì œë„ˆë ˆì´í„° ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤.**
  - ì¼ë°˜ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ í•¨ìˆ˜ ì½”ë“œë¥¼ ì¼ê´„ ì‹¤í–‰í•˜ê³  ê°’ì„ ë°˜í™˜í•œë‹¤.
  - ì œë„ˆë ˆì´í„° í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ í•¨ìˆ˜ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì´í„°ëŸ¬ë¸”ì´ë©´ì„œ ë™ì‹œì— ì´í„°ë ˆì´í„°ì¸ ì œë„ˆë ˆì´í„° ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤.

# 46.2. ì œë„ˆë ˆì´í„° í•¨ìˆ˜ì˜ ì •ì˜
- ì œë„ˆë ˆì´í„° í•¨ìˆ˜ëŠ” function* í‚¤ì›Œë“œë¡œ ì„ ì–¸í•œë‹¤. ê·¸ë¦¬ê³  í•˜ë‚˜ ì´ìƒì˜ yield í‘œí˜„ì‹ì„ í¬í•¨í•œë‹¤.
- ì´ê²ƒì„ì œì™¸í•˜ë©´ ì¼ë°˜ í•¨ìˆ˜ë¥¼ ì •ì˜í•˜ëŠ” ë°©ë²•ê³¼ ê°™ë‹¤.
```javascript
// ì œë„ˆë ˆì´í„° í•¨ìˆ˜ ì„ ì–¸ë¬¸
function* genDecFunc() {
  yield 1;
}

// ì œë„ˆë ˆì´í„° í•¨ìˆ˜ í‘œí˜„ì‹
const genExpFunc = function* () {
  yield 1;
};

// ì œë„ˆë ˆì´í„° ë©”ì„œë“œ
const obj = {
  * genObjMethod() {
    yield 1;
  }
};

// ì œë„ˆë ˆì´í„° í´ë˜ìŠ¤ ë©”ì„œë“œ
class MyClass {
  * genClsMethod() {
    yield 1;
  }
}
```
- ì• ìŠ¤í„°ë¦¬ìŠ¤í¬(*)ì˜ ìœ„ì¹˜ëŠ” function í‚¤ì›Œë“œì™€ í•¨ìˆ˜ ì´ë¦„ ì‚¬ì´ë¼ë©´ ì–´ë””ë“ ì§€ ìƒê´€ì—†ë‹¤.
- ë‹¤ìŒ ì˜ˆì œì˜ ì œë„ˆë ˆì´í„° í•¨ìˆ˜ëŠ” ëª¨ë‘ ìœ íš¨í•˜ë‹¤. í•˜ì§€ë§Œ ì¼ê´€ì„±ì„ ìœ ì§€í•˜ê¸° ìœ„í•´ **function í‚¤ì›Œë“œ ë°”ë¡œ ë’¤ì— ë¶™ì´ëŠ” ê²ƒì„ ê¶Œì¥í•œë‹¤.**
```javascript
function* genFunc() { yield 1; }

function * genFunc() { yield 1; }

function *genFunc() { yield 1; }

function*genFunc() { yield 1; }
```
- ì œë„ˆë ˆì´í„° í•¨ìˆ˜ëŠ” í™”ì‚´í‘œ í•¨ìˆ˜ë¡œ ì •ì˜í•  ìˆ˜ ì—†ë‹¤.
```javascript
const genArrowFunc = * () => {
  yield 1;
}; // SyntaxError: Unexpected token '*'
```
- ì œë„ˆë ˆì´í„° í•¨ìˆ˜ëŠ” new ì—°ì‚°ìì™€ í•¨ê»˜ ìƒì„±ì í•¨ìˆ˜ë¡œ í˜¸ì¶œí•  ìˆ˜ ì—†ë‹¤.
```javascript
function* genFunc() {
  yield 1;
}

new genFunc(); // TypeError: genFunc is not a constructor
```

# 46.3. ì œë„ˆë ˆì´í„° ê°ì²´
- **ì œë„ˆë ˆì´í„° í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ ì¼ë°˜ í•¨ìˆ˜ì²˜ëŸ¼ í•¨ìˆ˜ ì½”ë“œ ë¸”ë¡ì„ ì‹¤í–‰í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì œë„ˆë ˆì´í„° ê°ì²´ë¥¼ ìƒì„±í•´ ë°˜í™˜í•œë‹¤.**
- **ì œë„ˆë ˆì´í„° í•¨ìˆ˜ê°€ ë°˜í™˜í•œ ì œë„ˆë ˆì´í„° ê°ì²´ëŠ” ì´í„°ëŸ¬ë¸”ì´ë©´ì„œ ë™ì‹œì— ì´í„°ë ˆì´í„°ì´ë‹¤.**
- ë‹¤ì‹œ ë§í•´, ì œë„ˆë ˆì´í„° ê°ì²´ëŠ” Symbol.iterator ë©”ì„œë“œë¥¼ ìƒì†ë°›ëŠ” ì´í„°ëŸ¬ë¸”ì´ë©´ì„œ value, done í”„ë¡œí¼í‹°ë¥¼ ê°–ëŠ” ì´í„°ë ˆì´í„° ë¦¬ì ˆíŠ¸ ê°ì²´ë¥¼ ë°˜í™˜í•˜ëŠ” next ë©”ì„œë“œë¥¼ ì†Œìœ í•˜ëŠ” ì´í„°ë ˆì´í„°ë‹¤.
- ì œë„ˆë ˆì´í„° ê°ì²´ëŠ” next ë©”ì„œë“œë¥¼  ê°€ì§€ëŠ” ì´í„°ë ˆì´í„° ì´ë¯€ë¡œ symbol.iterator ë©”ì„œë“œë¥¼ í˜¸ì¶œí•´ì„œ ë³„ë„ë¡œ ì´í„°ë ˆì´í„°ë¥¼ ìƒì„±í•  í•„ìš”ê°€ ì—†ë‹¤.
```javascript
// ì œë„ˆë ˆì´í„° í•¨ìˆ˜
function* genFunc() {
  yield 1;
  yield 2;
  yield 3;
}

// ì œë„ˆë ˆì´í„° í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ ì œë„ˆë ˆì´í„° ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤.
const generator = genFunc();

// ì œë„ˆë ˆì´í„° ê°ì²´ëŠ” ì´í„°ëŸ¬ë¸”ì´ë©´ì„œ ë™ì‹œì— ì´í„°ë ˆì´í„°ë‹¤.
// ì´í„°ëŸ¬ë¸”ì€ Symbol.iterator ë©”ì„œë“œë¥¼ ì§ì ‘ êµ¬í˜„í•˜ê±°ë‚˜ í”„ë¡œí† íƒ€ì… ì²´ì¸ì„ í†µí•´ ìƒì†ë°›ì€ ê°ì²´ë‹¤.
console.log(Symbol.iterator in generator); // true
// ì´í„°ë ˆì´í„°ëŠ” next ë©”ì„œë“œë¥¼ ê°–ëŠ”ë‹¤.
console.log('next' in generator); // true
```
- ì œë„ˆë ˆì´í„° ê°ì²´ëŠ” next ë©”ì„œë“œë¥¼ ê°–ëŠ” ì´í„°ë ˆì´í„°ì§€ë§Œ ì´í„°ë ˆì´í„°ì—ëŠ” ì—†ëŠ” return,throw ë©”ì„œë“œë¥¼ ê°–ëŠ”ë‹¤.
- ì œë„ˆë ˆì´í„° ê°ì²´ì˜ ì„¸ ê°œì˜ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ ë™ì‘í•œë‹¤.
  - next ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´ ì œë„ˆë ˆì´í„° í•¨ìˆ˜ì˜ tield í‘œí˜„ì‹ê¹Œì§€ ì½”ë“œ ë¸”ë¡ì„ ì‹¤í–‰í•˜ê³   yieldëœ ê°’ì„ value í”„ë¡œí¼í‹° ê°’ìœ¼ë¡œ, falseë¥¼ done í”„ë¡œí¼í‹° ê°’ìœ¼ë¡œ ê°–ëŠ” ì´í„°ë ˆì´í„° ë¦¬ì ˆíŠ¸ ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤.
  - return ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´ ì¸ìˆ˜ë¡œ ì „ë‹¬ ë°›ì€ ê°’ì„ value í”„ë¡œí¼í‹° ê°’ìœ¼ë¡œ, trueë¥¼ done í”„ë¡œí¼í‹° ê°’ìœ¼ë¡œ ê°–ëŠ” ì´í„°ë ˆì´í„° ë¦¬ì ˆíŠ¸ ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤.
```javascript
function* genFunc() {
  try {
    yield 1;
    yield 2;
    yield 3;
  } catch (e) {
    console.error(e);
  }
}

const generator = genFunc();

console.log(generator.next()); // {value: 1, done: false}
console.log(generator.return('End!')); // {value: "End!", done: true}
```
  - throw ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´ ì¸ìˆ˜ë¡œ ì „ë‹¬ë°›ì€ ì—ëŸ¬ë¥¼ ë°œìƒì‹œí‚¤ê³  undefinedë¥¼ value í”„ë¡œí¼í‹° ê°’ìœ¼ë¡œ, trueë¥¼ done í”„ë¡œí¼í‹° ê°’ìœ¼ë¡œ ê°–ëŠ” ì´í„°ë ˆì´í„° ë¦¬ì ˆíŠ¸ ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤.
```javascript
function* genFunc() {
  try {
    yield 1;
    yield 2;
    yield 3;
  } catch (e) {
    console.error(e);
  }
}

const generator = genFunc();

console.log(generator.next()); // {value: 1, done: false}
console.log(generator.throw('Error!')); // {value: undefined, done: true}
```

# 46.4. ì œë„ˆë ˆì´í„°ì˜ ì¼ì‹œ ì¤‘ì§€ì™€ ì¬ê°œ
- ì œë„ˆë ˆì´í„°ëŠ” yield í‚¤ì›Œë“œì™€ next ë©”ì„œë“œë¥¼ í†µí•´ ì‹¤í–‰ì„ ì¼ì‹œ ì¤‘ì§€ í–ˆë‹¤ê°€ í•„ìš”í•œ ì‹œì ì— ë‹¤ì‹œ ì¬ê°œí•  ìˆ˜ ìˆë‹¤. ì¼ë°˜ í•¨ìˆ˜ëŠ” í˜¸ì¶œ ì´í›„ ì œì–´ê¶Œì„ í•¨ìˆ˜ê°€ ë…ì í•˜ì§€ë§Œ ì œë„ˆë ˆì´í„°ëŠ” í•¨ìˆ˜ í˜¸ì¶œìì—ì„¸ ì œì–´ê¶Œì„ ì–‘ë„í•˜ì—¬ í•„ìš”í•œ ì‹œì ì— í•¨ìˆ˜ ì‹¤í–‰ì„ ì¬ê°œí•  ìˆ˜ ìˆë‹¤.
- ì œë„ˆë ˆì´í„° í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ ì œë„ˆë ˆì´í„° í•¨ìˆ˜ì˜ ì½”ë“œ  ë¸”ë¡ì´ ì‹¤í–‰ë˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì œë„ˆë ˆì´í„° ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤ê³  í–ˆë‹¤. ì´í„°ëŸ¬ë¸”ì´ë©´ì„œ ë™ì‹œì— ì´í„°ë ˆì´í„°ì¸ ì œë„ˆë ˆì´í„° ê°ì²´ëŠ” next ë©”ì„œë“œë¥¼ ê°–ëŠ”ë‹¤. ì œë„ˆë ˆì´í„° ê°ì²´ì˜ next ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´ ì œë„ˆë ˆì´í„° í•¨ìˆ˜ì˜ ì½”ë“œ ë¸”ë¡ì„ ì‹¤í–‰í•œë‹¤.
- ë‹¨, ì¼ë°˜ í•¨ìˆ˜ì²˜ëŸ¼ í•œ ë²ˆì— ì½”ë“œ ë¸”ë¡ì˜ ëª¨ë“  ì½”ë“œë¥¼ ì¼ê´„ ì‹¤í–‰í•˜ëŠ” ê±°ì´ ì•„ë‹ˆë¼ yield í‘œí˜„ì‹ê¹Œì§€ë§Œ ì‹¤í–‰í•œë‹¤. yield í‚¤ì›Œë“œëŠ” ì œë„ˆë ˆì´í„° í•¨ìˆ˜ì˜ ì‹¤í–‰ì„ ì¼ì‹œ ì¤‘ì§€ì‹œí‚¤ê±°ë‚˜ yield í‚¤ì›Œë“œ ë’¤ì— ì˜¤ëŠ” í‘œí˜„ì‹ì˜ í‰ê°€ ê²°ê³¼ë¥¼ ì œë„ˆë ˆì´í„° í•¨ìˆ˜ í˜¸ì¶œìì—ê²Œ ë°˜í™˜í•œë‹¤.
```javascript
// ì œë„ˆë ˆì´í„° í•¨ìˆ˜
function* genFunc() {
  yield 1;
  yield 2;
  yield 3;
}

// ì œë„ˆë ˆì´í„° í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ ì œë„ˆë ˆì´í„° ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤.
// ì´í„°ëŸ¬ë¸”ì´ë©´ì„œ ë™ì‹œì— ì´í„°ë ˆì´í„°ì¸ ì œë„ˆë ˆì´í„° ê°ì²´ëŠ” next ë©”ì„œë“œë¥¼ ê°–ëŠ”ë‹¤.
const generator = genFunc();

// ì²˜ìŒ next ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´ ì²« ë²ˆì§¸ yield í‘œí˜„ì‹ê¹Œì§€ ì‹¤í–‰ë˜ê³  ì¼ì‹œ ì¤‘ì§€ëœë‹¤.
// next ë©”ì„œë“œëŠ” ì´í„°ë ˆì´í„° ë¦¬ì ˆíŠ¸ ê°ì²´({value, done})ë¥¼ ë°˜í™˜í•œë‹¤.
// value í”„ë¡œí¼í‹°ì—ëŠ” ì²« ë²ˆì§¸ yield í‘œí˜„ì‹ì—ì„œ yieldëœ ê°’ 1ì´ í• ë‹¹ëœë‹¤.
// done í”„ë¡œí¼í‹°ì—ëŠ” ì œë„ˆë ˆì´í„° í•¨ìˆ˜ê°€ ëê¹Œì§€ ì‹¤í–‰ë˜ì—ˆëŠ”ì§€ë¥¼ ë‚˜íƒ€ë‚´ëŠ” falseê°€ í• ë‹¹ëœë‹¤.
console.log(generator.next()); // {value: 1, done: false}

// ë‹¤ì‹œ next ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´ ë‘ ë²ˆì§¸ yield í‘œí˜„ì‹ê¹Œì§€ ì‹¤í–‰ë˜ê³  ì¼ì‹œ ì¤‘ì§€ëœë‹¤.
// next ë©”ì„œë“œëŠ” ì´í„°ë ˆì´í„° ë¦¬ì ˆíŠ¸ ê°ì²´({value, done})ë¥¼ ë°˜í™˜í•œë‹¤.
// value í”„ë¡œí¼í‹°ì—ëŠ” ë‘ ë²ˆì§¸ yield í‘œí˜„ì‹ì—ì„œ yieldëœ ê°’ 2ê°€ í• ë‹¹ëœë‹¤.
// done í”„ë¡œí¼í‹°ì—ëŠ” ì œë„ˆë ˆì´í„° í•¨ìˆ˜ê°€ ëê¹Œì§€ ì‹¤í–‰ë˜ì—ˆëŠ”ì§€ë¥¼ ë‚˜íƒ€ë‚´ëŠ” falseê°€ í• ë‹¹ëœë‹¤.
console.log(generator.next()); // {value: 2, done: false}

// ë‹¤ì‹œ next ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´ ì„¸ ë²ˆì§¸ yield í‘œí˜„ì‹ê¹Œì§€ ì‹¤í–‰ë˜ê³  ì¼ì‹œ ì¤‘ì§€ëœë‹¤.
// next ë©”ì„œë“œëŠ” ì´í„°ë ˆì´í„° ë¦¬ì ˆíŠ¸ ê°ì²´({value, done})ë¥¼ ë°˜í™˜í•œë‹¤.
// value í”„ë¡œí¼í‹°ì—ëŠ” ì„¸ ë²ˆì§¸ yield í‘œí˜„ì‹ì—ì„œ yieldëœ ê°’ 3ì´ í• ë‹¹ëœë‹¤.
// done í”„ë¡œí¼í‹°ì—ëŠ” ì œë„ˆë ˆì´í„° í•¨ìˆ˜ê°€ ëê¹Œì§€ ì‹¤í–‰ë˜ì—ˆëŠ”ì§€ë¥¼ ë‚˜íƒ€ë‚´ëŠ” falseê°€ í• ë‹¹ëœë‹¤.
console.log(generator.next()); // {value: 3, done: false}

// ë‹¤ì‹œ next ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´ ë‚¨ì€ yield í‘œí˜„ì‹ì´ ì—†ìœ¼ë¯€ë¡œ ì œë„ˆë ˆì´í„° í•¨ìˆ˜ì˜ ë§ˆì§€ë§‰ê¹Œì§€ ì‹¤í–‰í•œë‹¤.
// next ë©”ì„œë“œëŠ” ì´í„°ë ˆì´í„° ë¦¬ì ˆíŠ¸ ê°ì²´({value, done})ë¥¼ ë°˜í™˜í•œë‹¤.
// value í”„ë¡œí¼í‹°ì—ëŠ” ì œë„ˆë ˆì´í„° í•¨ìˆ˜ì˜ ë°˜í™˜ê°’ undefinedê°€ í• ë‹¹ëœë‹¤.
// done í”„ë¡œí¼í‹°ì—ëŠ” ì œë„ˆë ˆì´í„° í•¨ìˆ˜ê°€ ëê¹Œì§€ ì‹¤í–‰ë˜ì—ˆìŒì„ ë‚˜íƒ€ë‚´ëŠ” trueê°€ í• ë‹¹ëœë‹¤.
console.log(generator.next()); // {value: undefined, done: true}
```
- ì œë„ˆë ˆì´í„° ê°ì²´ì˜ next ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´ yield í‘œí˜„ì‹ê¹Œì§€ ì‹¤í–‰ë˜ê³  ì¼ì‹œ ì¤‘ì§€ ëœë‹¤. ì´ë•Œ í•¨ìˆ˜ì˜  ì œì–´ê¶Œì´ í˜¸ì¶œìë¡œ ì–‘ë„ëœë‹¤. ì´í›„ í•„ìš”í•œ ì‹œì ì— í˜¸ì¶œìê°€  ë˜ë‹¤ì‹œ next ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´ ì¼ì‹œ ì¤‘ì§€ëœ ì½”ë“œë¶€í„° ì‹¤í–‰ì„ ì¬ê°œí•˜ê¸° ì‹œì‘í•˜ì—¬ ë‹¤ìŒ yield í‘œí˜„ì‹ê¹Œì§€ ì‹¤í–‰ë˜ê³  ë˜ ë‹¤ì‹œ ì¼ì‹œ ì¤‘ì§€ ëœë‹¤.
- ì´ë•Œ ì œë„ˆë ˆì´í„° ê°ì²´ì˜ next ë©”ì„œë“œëŠ” value, done í”„ë¡œí¼í‹°ë¥¼ ê°–ëŠ” ì´í„°ë ˆì´í„° ë¦¬ì ˆíŠ¸ ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤.next ë©”ì„œë“œê°€  ë°˜í™˜í•œ ì´í„°ë ˆì´í„° ë¦¬ì ˆìŠ¤ ê°ì²´ì˜ value í”„ë¡œí¼í‹°ì—ëŠ” yield í‘œí˜„ì‹ì—ì„œ yieldëœ ê°’(yield í‚¤ì›Œë“œ ë’¤ì˜ ê°’)ì´ í• ë‹¹ë˜ê³  done í”„ë¡œí¼í‹°ì—ëŠ” ì œë„ˆë ˆì´í„° í•¨ìˆ˜ê°€ ëê¹Œì§€ ì‹¤í–‰ë˜ì—ˆëŠ”ì§€ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ë¶ˆë¦¬ì–¸ ê°’ì´ í• ë‹¹ëœë‹¤.
- ì´ì²˜ëŸ¼ next ë©”ì„œë“œë¥¼ ë°˜ë³µí˜¸ì¶œí•˜ì—¬ yield í‘œí˜„ì‹ê¹Œì§€ ì‹¤í–‰ê³¼  ì¼ì‹œ ì¤‘ì§€ë¥¼ ë°˜ë³µí•˜ë‹¤ê°€  ì œë„ˆë ˆì´í„° í•¨ìˆ˜ê°€ ëŒê¹Œì§€ ì‹¤í–‰ë˜ë©´ next ë©”ì„œë“œã… ë°˜í™˜í•˜ëŠ” ì´í„°ë ˆì´í„° ë¦¬ì ˆíŠ¸ ê°ì²´ì˜ value í”„ë¡œí¼í‹°ì—ëŠ” ì œë„ˆë ˆì´í„° í•¨ìˆ˜ì˜ ë°˜í™˜ê°’ì´ í• ë‹¹ë˜ê³  done í”„ë¡œí¼í‹°ì—ëŠ” ì œë„ˆë ˆì´í„° í•¨ìˆ˜ê°€ ëê¹Œì§€ ì‹¤í–‰ë˜ì—ˆìŒì„ ë‚˜íƒ€ë‚´ëŠ” trueê°€ í• ë‹¹ëœë‹¤.
```
generator.next() -> yield -> generator.next() -> yield -> ... -> generator.next() -> return
```
- ì´í„°ë ˆì´í„°ì˜ next  ë©”ì„œë“œì™€ ë‹¬ë¦¬ ì œë„ˆë ˆì´í„° ê°ì²´ì˜ next ë©”ì„œë“œì—ëŠ” ì¸ìˆ˜ë¥¼ ì „ë‹¬í•  ìˆ˜ ìˆë‹¤.
- ì œë„ˆë ˆì´í„° ê°ì²´ì˜ next ë©”ì„œë“œì— ì „ë‹¬í•œ ì¸ìˆ˜ëŠ” ì œë„ˆë ˆì´í„° í•¨ìˆ˜ì˜ yield í‘œí˜„ì‹ì„ í• ë‹¹ë°›ëŠ” ë³€ìˆ˜ì— í• ë‹¹ëœë‹¤. yield í‘œí˜„ì‹ì„ í• ë‹¹ë°›ëŠ” ë³€ìˆ˜ì— yield í‘œí˜„ì‹ì˜ í‰ê°€ ê²°ê³¼ê°€ í• ë‹¹ë˜ì§€ ì•ŠëŠ” ê²ƒì— ì£¼ì˜í•˜ì.
```javascript
function* genFunc() {
  // ì²˜ìŒ next ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´ ì²« ë²ˆì§¸ yield í‘œí˜„ì‹ê¹Œì§€ ì‹¤í–‰ë˜ê³  ì¼ì‹œ ì¤‘ì§€ëœë‹¤.
  // ì´ë•Œ yieldëœ ê°’ 1ì€ next ë©”ì„œë“œê°€ ë°˜í™˜í•œ ì´í„°ë ˆì´í„° ë¦¬ì ˆíŠ¸ ê°ì²´ì˜ value í”„ë¡œí¼í‹°ì— í• ë‹¹ëœë‹¤.
  // x ë³€ìˆ˜ì—ëŠ” ì•„ì§ ì•„ë¬´ê²ƒë„ í• ë‹¹ë˜ì§€ ì•Šì•˜ë‹¤. x ë³€ìˆ˜ì˜ ê°’ì€ next ë©”ì„œë“œê°€ ë‘ ë²ˆì§¸ í˜¸ì¶œë  ë•Œ ê²°ì •ëœë‹¤.
  const x = yield 1;

  // ë‘ ë²ˆì§¸ next ë©”ì„œë“œë¥¼ í˜¸ì¶œí•  ë•Œ ì „ë‹¬í•œ ì¸ìˆ˜ 10ì€ ì²« ë²ˆì§¸ yield í‘œí˜„ì‹ì„ í• ë‹¹ë°›ëŠ” x ë³€ìˆ˜ì— í• ë‹¹ëœë‹¤.
  // ì¦‰, const x = yield 1;ì€ ë‘ ë²ˆì§¸ next ë©”ì„œë“œë¥¼ í˜¸ì¶œí–ˆì„ ë•Œ ì™„ë£Œëœë‹¤.
  // ë‘ ë²ˆì§¸ next ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´ ë‘ ë²ˆì§¸ yield í‘œí˜„ì‹ê¹Œì§€ ì‹¤í–‰ë˜ê³  ì¼ì‹œ ì¤‘ì§€ëœë‹¤.
  // ì´ë•Œ yieldëœ ê°’ x + 10ì€ next ë©”ì„œë“œê°€ ë°˜í™˜í•œ ì´í„°ë ˆì´í„° ë¦¬ì ˆíŠ¸ ê°ì²´ì˜ value í”„ë¡œí¼í‹°ì— í• ë‹¹ëœë‹¤.
  const y = yield (x + 10);

  // ì„¸ ë²ˆì§¸ next ë©”ì„œë“œë¥¼ í˜¸ì¶œí•  ë•Œ ì „ë‹¬í•œ ì¸ìˆ˜ 20ì€ ë‘ ë²ˆì§¸ yield í‘œí˜„ì‹ì„ í• ë‹¹ë°›ëŠ” y ë³€ìˆ˜ì— í• ë‹¹ëœë‹¤.
  // ì¦‰, const y = yield (x + 10);ëŠ” ì„¸ ë²ˆì§¸ next ë©”ì„œë“œë¥¼ í˜¸ì¶œí–ˆì„ ë•Œ ì™„ë£Œëœë‹¤.
  // ì„¸ ë²ˆì§¸ next ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´ í•¨ìˆ˜ ëê¹Œì§€ ì‹¤í–‰ëœë‹¤.
  // ì´ë•Œ ì œë„ˆë ˆì´í„° í•¨ìˆ˜ì˜ ë°˜í™˜ê°’ x + yëŠ” next ë©”ì„œë“œê°€ ë°˜í™˜í•œ ì´í„°ë ˆì´í„° ë¦¬ì ˆíŠ¸ ê°ì²´ì˜ value í”„ë¡œí¼í‹°ì— í• ë‹¹ëœë‹¤.
  // ì¼ë°˜ì ìœ¼ë¡œ ì œë„ˆë ˆì´í„°ì˜ ë°˜í™˜ê°’ì€ ì˜ë¯¸ê°€ ì—†ë‹¤.
  // ë”°ë¼ì„œ ì œë„ˆë ˆì´í„°ì—ì„œëŠ” ê°’ì„ ë°˜í™˜í•  í•„ìš”ê°€ ì—†ê³  returnì€ ì¢…ë£Œì˜ ì˜ë¯¸ë¡œë§Œ ì‚¬ìš©í•´ì•¼ í•œë‹¤.
  return x + y;
}

// ì œë„ˆë ˆì´í„° í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ ì œë„ˆë ˆì´í„° ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤.
// ì´í„°ëŸ¬ë¸”ì´ë©° ë™ì‹œì— ì´í„°ë ˆì´í„°ì¸ ì œë„ˆë ˆì´í„° ê°ì²´ëŠ” next ë©”ì„œë“œë¥¼ ê°–ëŠ”ë‹¤.
const generator = genFunc(0);

// ì²˜ìŒ í˜¸ì¶œí•˜ëŠ” next ë©”ì„œë“œì—ëŠ” ì¸ìˆ˜ë¥¼ ì „ë‹¬í•˜ì§€ ì•ŠëŠ”ë‹¤.
// ë§Œì•½ ì²˜ìŒ í˜¸ì¶œí•˜ëŠ” next ë©”ì„œë“œì— ì¸ìˆ˜ë¥¼ ì „ë‹¬í•˜ë©´ ë¬´ì‹œëœë‹¤.
// next ë©”ì„œë“œê°€ ë°˜í™˜í•œ ì´í„°ë ˆì´í„° ë¦¬ì ˆíŠ¸ ê°ì²´ì˜ value í”„ë¡œí¼í‹°ì—ëŠ” ì²« ë²ˆì§¸ yieldëœ ê°’ 1ì´ í• ë‹¹ëœë‹¤.
let res = generator.next();
console.log(res); // {value: 1, done: false}

// next ë©”ì„œë“œì— ì¸ìˆ˜ë¡œ ì „ë‹¬í•œ 10ì€ genFunc í•¨ìˆ˜ì˜ x ë³€ìˆ˜ì— í• ë‹¹ëœë‹¤.
// next ë©”ì„œë“œê°€ ë°˜í™˜í•œ ì´í„°ë ˆì´í„° ë¦¬ì ˆíŠ¸ ê°ì²´ì˜ value í”„ë¡œí¼í‹°ì—ëŠ” ë‘ ë²ˆì§¸ yieldëœ ê°’ 20ì´ í• ë‹¹ëœë‹¤.
res = generator.next(10);
console.log(res); // {value: 20, done: false}

// next ë©”ì„œë“œì— ì¸ìˆ˜ë¡œ ì „ë‹¬í•œ 20ì€ genFunc í•¨ìˆ˜ì˜ y ë³€ìˆ˜ì— í• ë‹¹ëœë‹¤.
// next ë©”ì„œë“œê°€ ë°˜í™˜í•œ ì´í„°ë ˆì´í„° ë¦¬ì ˆíŠ¸ ê°ì²´ì˜ value í”„ë¡œí¼í‹°ì—ëŠ” ì œë„ˆë ˆì´í„° í•¨ìˆ˜ì˜ ë°˜í™˜ê°’ 30ì´ í• ë‹¹ëœë‹¤.
res = generator.next(20);
console.log(res); // {value: 30, done: true}
```
- ì´ì²˜ëŸ¼ ì œë„ˆë ˆì´í„°  í•¨ìˆ˜ëŠ” next ë©”ì„œë“œì™€ yield í‘œí˜„ì‹ì„ í†µí•´ í•¨ìˆ˜ í˜¸ì¶œìì™€ í•¨ìˆ˜ì˜ ìƒíƒœë¥¼ ì£¼ê³ ë°›ì„ ìˆ˜ ì´ë‹¤. í•¨ìˆ˜ í˜¸ì¶œìëŠ” next ë©”ì„œë“œë¥¼ í†µí•´ yield í‘œí˜„ì‹ê¹Œì§€  í•¨ìˆ˜ë¥¼ ì‹¤í–‰ì‹œì¼œ ì œë„ˆë ˆì´í„° ê°ì²´ê°€ ê´€ë¦¬í•˜ëŠ” ìƒíƒœ(yieldëœ ê°’)ë¥¼ êº¼ë‚´ì˜¬ ìˆ˜ ìˆê³ , next ë©”ì„œë“œì— ì¸ìˆ˜ë¥¼ ì „ë‹¬í•´ì„œ ì œë„ˆë ˆì´í„° ê°ì²´ì— ìƒíƒœ(yield í‘œí˜„ì‹ì„ í• ë‹¹ë°›ëŠ” ë³€ìˆ˜)ë¥¼ ë°€ì–´ë„£ì„ ìˆ˜ ìˆë‹¤.
- ì´ëŸ¬í•œ ì œë„ˆë ˆì´í„° íŠ¹ì„±ì„ í™œìš©í•˜ë©´ ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ ë™ê¸° ì²˜ë¦¬ì²˜ëŸ¼ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.

# 46.5. ì œë„ˆë ˆì´í„°ì˜ í™œìš©
### 46.5.1. ì´í„°ëŸ¬ë¸”ì˜ êµ¬í˜„
- ì œë„ˆë ˆì´í„° í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ë©´ ì´í„°ë ˆì´ì…˜ í”„ë¡œí† ì½œì„ ì¤€ìˆ˜í•´ ì´í„°ëŸ¬ë¸”ì„ ìƒì„±í•˜ëŠ” ë°©ì‹ë³´ë‹¤ ê°„ë‹¨íˆ ì´í„°ëŸ¬ë¸”ì„ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.
- ë¨¼ì € ì´í„°ë ˆì´ì…˜ í”„ë¡œí† ì½œì„ ì¤€ìˆ˜í•˜ì—¬ ë¬´í•œ íŒŒë³´ë‚˜ì¹˜ ìˆ˜ì—´ì„ ìƒì„±í•˜ëŠ” í•¨ìˆ˜ë¥¼ êµ¬í˜„í•´ë³´ì.
```javascript
// ë¬´í•œ ì´í„°ëŸ¬ë¸”ì„ ìƒì„±í•˜ëŠ” í•¨ìˆ˜
const infiniteFibonacci = (function () {
  let [pre, cur] = [0, 1];

  return {
    [Symbol.iterator]() { return this; },
    next() {
      [pre, cur] = [cur, pre + cur];
      // ë¬´í•œ ì´í„°ëŸ¬ë¸”ì´ë¯€ë¡œ done í”„ë¡œí¼í‹°ë¥¼ ìƒëµí•œë‹¤.
      return { value: cur };
    }
  };
}());

// infiniteFibonacciëŠ” ë¬´í•œ ì´í„°ëŸ¬ë¸”ì´ë‹¤.
for (const num of infiniteFibonacci) {
  if (num > 10000) break;
  console.log(num); // 1 2 3 5 8...2584 4181 6765
}
```
- ì´ë²ˆì—ëŠ” ì œë„ˆë ˆì´í„°ë¥¼ ì‚¬ìš©í•˜ì—¬ ë¬´í•œ íŒŒë³´ë‚˜ì¹˜ ìˆ˜ì—´ì„ ìƒì„±í•˜ëŠ” í•¨ìˆ˜ë¥¼ êµ¬í˜•í•´ë³´ì.
- ì œë„ˆë ˆì´í„° í•¨ìˆ˜ë¥¼ì‚¬ìš©í•˜ë©´ ì´í„°ë ˆì´ì…˜ í”„ë¡œí† ì½œì„ ì¤€ìˆ˜í•´ ì´í„°ëŸ¬ë¸”ì„ ìƒì„±í•˜ëŠ” ë°©ì‹ë³´ë‹¤ ê°„ë‹¨íˆ ì´í„°ëŸ¬ë¸”ì„ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.
```javascript
// ë¬´í•œ ì´í„°ëŸ¬ë¸”ì„ ìƒì„±í•˜ëŠ” ì œë„ˆë ˆì´í„° í•¨ìˆ˜
const infiniteFibonacci = (function* () {
  let [pre, cur] = [0, 1];

  while (true) {
    [pre, cur] = [cur, pre + cur];
    yield cur;
  }
}());

// infiniteFibonacciëŠ” ë¬´í•œ ì´í„°ëŸ¬ë¸”ì´ë‹¤.
for (const num of infiniteFibonacci) {
  if (num > 10000) break;
  console.log(num); // 1 2 3 5 8...2584 4181 6765
}
```

### 46.5.2. ë¹„ë™ê¸° ì²˜ë¦¬
- ì œë„ˆë ˆì´í„° í•¨ìˆ˜ëŠ” next ë©”ì„œë“œì™€ yield í‘œí˜„ì‹ì„í†µí•´ í•¨ìˆ˜ í˜¸ì¶œìì™€ í•¨ìˆ˜ì˜ ìƒíƒœë¥¼ ì£¼ê³ ë°›ì„ ìˆ˜ ìˆë‹¤. ì´ëŸ¬í•œ íŠ¹ì„±ì„ í™œìš©í•˜ë©´ í”„ë¡œë¯¸ìŠ¤ë¥¼ ì‚¬ìš©í•œ ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ ë™ê¸° ì²˜ë¦¬ì²˜ëŸ¼ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.
- ë‹¤ì‹œ ë§í•´, í”„ë¡œë¯¸ìŠ¤ì˜ í›„ì† ì²˜ë¦¬ ë©”ì„œë“œ then/catch/finally ì—†ì´ ë¹„ë™ê¸°ì²˜ë¦¬ ê²°ê³¼ë¥¼ ë°˜í™˜í•˜ë„ë¡ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.
```javascript
// node-fetchëŠ” node.js í™˜ê²½ì—ì„œ window.fetch í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•œ íŒ¨í‚¤ì§€ë‹¤.
// ë¸Œë¼ìš°ì € í™˜ê²½ì—ì„œ ì´ ì˜ˆì œë¥¼ ì‹¤í–‰í•œë‹¤ë©´ ì•„ë˜ ì½”ë“œëŠ” í•„ìš” ì—†ë‹¤.
// https://github.com/node-fetch/node-fetch
const fetch = require('node-fetch');

// ì œë„ˆë ˆì´í„° ì‹¤í–‰ê¸°
const async = generatorFunc => {
  const generator = generatorFunc(); // â‘¡

  const onResolved = arg => {
    const result = generator.next(arg); // â‘¤

    return result.done
      ? result.value // â‘¨
      : result.value.then(res => onResolved(res)); // â‘¦
  };

  return onResolved; // â‘¢
};

(async(function* fetchTodo() { // â‘ 
  const url = 'https://jsonplaceholder.typicode.com/todos/1';

  const response = yield fetch(url); // â‘¥
  const todo = yield response.json(); // â‘§
  console.log(todo);
  // {userId: 1, id: 1, title: 'delectus aut autem', completed: false}
})()); // â‘£
```
- ìœ„ ì˜ˆì œì˜ ì œë„ˆë ˆì´í„° í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ëŠ” ì œë„ˆë ˆì´í„° ì‹¤í–‰ê¸°ì¸ async í•¨ìˆ˜ëŠ” ì´í•´ë¥¼ ë•ê¸° ìœ„í•´ ê°„ëµí™”í•œ ì˜ˆì œì´ë¯€ë¡œ ì™„ì „í•˜ì§€ ì•Šë‹¤.
- ë‹¤ìŒì— ì„¤ëª…í•  async/awaitë¥¼ ì‚¬ìš©í•˜ë©´ async í•¨ìˆ˜ì™€ ê°™ì€ ì œë„ˆë ˆì´í„° ì‹¤í–‰ê¸°ë¥¼ ì‚¬ìš©í•  í•„ìš”ê°€ ì—†ì§€ë§Œ í˜¹ì‹œ ì œë„ˆë ˆì´í„° ì‹¤í–‰ê¸°ê°€ í•„ìš”í•˜ë‹¤ë©´ ì§ì ‘ êµ¬í˜„í•˜ëŠ” ê²ƒë³´ë‹¤ co ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ê¸° ë°”ë€ë‹¤.
```javascript
const fetch = require('node-fetch');
// https://github.com/tj/co
const co = require('co');

co(function* fetchTodo() {
  const url = 'https://jsonplaceholder.typicode.com/todos/1';

  const response = yield fetch(url);
  const todo = yield response.json();
  console.log(todo);
  // { userId: 1, id: 1, title: 'delectus aut autem', completed: false }
});
```

# 46.6. async/await
  
